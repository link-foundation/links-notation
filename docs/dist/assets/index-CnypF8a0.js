(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();class c{constructor(){this.inputElement=document.getElementById("input"),this.outputElement=document.getElementById("output"),this.parseBtn=document.getElementById("parse-btn"),this.parseTimeout=null,this.initializePlayground()}initializePlayground(){!this.parseBtn||!this.inputElement||!this.outputElement||(this.parseBtn.addEventListener("click",()=>{this.parseInput()}),this.inputElement.addEventListener("input",()=>{clearTimeout(this.parseTimeout),this.parseTimeout=setTimeout(()=>{this.parseInput()},300)}),this.parseInput())}parseInput(){if(!this.inputElement||!this.outputElement)return;const e=this.inputElement.value.trim();if(!e){this.outputElement.textContent="Enter some Links Notation to see the parsed result...";return}try{const t=this.parseLinksNotation(e);this.outputElement.textContent=JSON.stringify(t,null,2)}catch(t){this.outputElement.textContent=`Parse Error: ${t.message}`}}parseLinksNotation(e){const t=e.split(`
`).filter(n=>n.trim()),r=[];for(let n=0;n<t.length;n++){const i=t[n].trim();if(!i)continue;const s=this.parseLine(i,n);s&&r.push(s)}return{type:"links-notation",version:"0.6.0",links:r,totalLinks:r.length}}parseLine(e,t){const r=e.trim();let n=r,i=!1;r.startsWith("(")&&r.endsWith(")")&&(n=r.slice(1,-1),i=!0);const s=this.tokenize(n);return{id:`link_${t}`,original:e,wrapped:i,references:s,type:this.determineType(s)}}tokenize(e){const t=[];let r="",n=0,i=!1;for(let s=0;s<e.length;s++){const o=e[s],u=s>0?e[s-1]:null;if(this.isQuoteToggle(o,u))i=!i,r+=o;else if(i)r+=o;else{const a=this.processChar(o,r,n,t);r=a.current,n=a.inParens}}return this.addTokenIfValid(r,t),t}isQuoteToggle(e,t){return e==='"'&&t!=="\\"}processChar(e,t,r,n){return e==="("?this.handleOpenParen(t,r,n):e===")"?this.handleCloseParen(t,r,n):this.isWhitespace(e)&&r===0?this.handleWhitespace(t,r,n):{current:t+e,inParens:r}}handleOpenParen(e,t,r){return this.addTokenIfValid(e,r),{current:"(",inParens:t+1}}handleCloseParen(e,t,r){const n=t-1,i=e+")";return n===0?(this.addTokenIfValid(i,r),{current:"",inParens:n}):{current:i,inParens:n}}handleWhitespace(e,t,r){return this.addTokenIfValid(e,r),{current:"",inParens:t}}isWhitespace(e){return e===" "||e==="	"}addTokenIfValid(e,t){const r=e.trim();r&&t.push(this.createToken(r))}createToken(e){return this.isLabeledReference(e)?this.createLabeledReference(e):this.isNestedLink(e)?this.createNestedLink(e):this.createSimpleReference(e)}isLabeledReference(e){const t=e.indexOf(":");return t>0&&t<e.length-1}createLabeledReference(e){const t=e.indexOf(":");return{type:"labeled-reference",label:e.substring(0,t).trim(),value:e.substring(t+1).trim(),original:e}}isNestedLink(e){return e.startsWith("(")&&e.endsWith(")")}createNestedLink(e){const t=e.slice(1,-1);return{type:"nested-link",content:t,references:this.tokenize(t),original:e}}createSimpleReference(e){return{type:"reference",value:e,original:e}}determineType(e){return e.length===0?"empty":e.length===1?"singleton":e.length===2?"doublet":e.length===3?"triplet":`${e.length}-tuple`}}document.addEventListener("DOMContentLoaded",()=>{new c,document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(r){r.preventDefault();const n=document.querySelector(this.getAttribute("href"));n&&n.scrollIntoView({behavior:"smooth",block:"start"})})});const l={threshold:.1,rootMargin:"0px 0px -50px 0px"},e=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&(r.target.style.opacity="1",r.target.style.transform="translateY(0)")})},l);document.querySelectorAll(".feature, .example-card, .doc-card").forEach(t=>{t.style.opacity="0",t.style.transform="translateY(20px)",t.style.transition="opacity 0.6s ease, transform 0.6s ease",e.observe(t)})});
